{% extends 'base.html' %}
{% block content %}

<br>
{% if messages %}
<div class="messages">
    {% for message in messages %}
    <p class="{{ message.tags }}">{{ message }}</p>
    {% endfor %}
</div>
{% endif %}

<section class="content">
    <div class="follow_block">
        <h2>Abonnements</h2>
        <form action="" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <p class="follow_title">
                <label>Suivre d'autres utilisateurs</label><br>
                {{ follow_form.username }}
            </p>

            <p class="follow_submit_p">
                <input class="follow_submit_button" title="Bouton Suivre un utilisateur" type="submit" value="Envoyer">
            </p>
            <br>
            <hr class="follow_hr">

            <p class="p_following">
                <label>Abonnements</label>
            </p>
            <div class="follow">
                {% for follow in following %}
                    <p class="following">{{ follow.followed_user.username }}</p>
                    <a title="Bouton Se désabonner de {{follow.followed_user.username}}"
                       href="{% url 'feed:delete-follow' user_id=follow.followed_user.id %}">Se désabonner</a>
                    <br>
                {% endfor %}
            </div>
            <p class="p_followedby">
                <label>Abonnés</label>
            </p>
            <div class="follow">
                {% for follow in followed_by %}
                    <p class="followedby">{{ follow.user.username }}</p>
                {% endfor %}
            </div>
        </form>
    </div>
</section>

{% endblock %}